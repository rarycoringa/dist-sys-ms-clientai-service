spring:
    application:
        name: clientai
    loadbalancer:
        ribbon:
            enabled: false
    cloud:
        config:
            discovery:
                enabled: true
                service-id: config
            request-connected-timeout: 5000
            request-read-timeout: 5000
            fail-fast: true
            retry:
                max-attempts: 6
                initial-interval: 1000
                max-interval: 2000
                multiplier: 1.1
    config:
        import: "optional:configserver:"

server:
    port: ${SERVER_PORT:8181}

openai:
    api:
        key: ${OPENAI_API_KEY}
        url: https://api.openai.com/v1

resilience4j:
    circuitbreaker:
        instances:
            openai:
                slidingWindowSize: 5
                failureRateThreshold: 50
                waitDurationInOpenState: 15s
    bulkhead:
        instances:
            openai:
                maxConcurrentCalls: 5
    ratelimiter:
        instances:
            openai:
                limitForPeriod: 5
                limitRefreshPeriod: 1s
                timeoutDuration: 500ms

eureka:
    client:
        fetch-registry: true
        register-with-eureka: true
        service-url:
            defaultZone: http://discovery1:8761/eureka,http://discovery2:8762/eureka
    instance:
        prefer-ip-address: true

management:
    endpoints:
        web:
            exposure:
                include: "*"
    endpoint:
        health:
            show-details: always
            show-components: always
    tracing:
        enabled: true
        sampling:
            probability: 1.0
    zipkin:
        tracing:
            endpoint: http://zipkin:9411/api/v2/spans

